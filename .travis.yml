language: python
sudo: required
dist: trusty
python:
  - 2.7
  - 3.3
  - 3.4
  - 3.5
  - "3.5-dev"
  - "nightly"
matrix:
  allow_failures:
    - python: 3.3
    - python: 3.4
    - python: 3.5
    - python: "3.5-dev"
    - python: "nightly"
branches:
  only:
    - master
    - develop
before_install:
  - sudo apt-get -qq update
  - sudo apt-get install -y cmake build-essential libglib2.0-dev python-dev bluez bluetooth libbluetooth-dev libboost-python-dev libboost-thread-dev
install:
  - "pip install pytest"
  - "pip install pytest-cov"
  - "pip install python-coveralls"
  - "pip install sphinx_rtd_theme"
  - "pip install -e ."
script: py.test tests/ --cov pymetawear --cov-report term-missing
env:
  global:
    - GH_REF: github.com/hbldh/pymetawear.git
deploy:
  provider: script
  skip_cleanup: true
  script: bash ./deploy_gh_pages.sh
  on:
    branch: develop
    python: 2.7

